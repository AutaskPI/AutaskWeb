<!DOCTYPE html>
<html lang="Pt-br">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" href="img/logoOficial.png" type="image/x-icon" />
	<script src="js/jquery.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.mask.min.js" /></script>
	<title>Autask</title>

	<!-- Link CSS  -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
	<link href="css/cadastro.css" type="text/css" rel="stylesheet" media="screen,projection" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

</head>
<style rel="stylesheet" type="text/css">
	.esconder {
		display: none;
		color: red;
		position: absolute;
		top:35px;
		font-size: 12px;
	}
</style>

<body>

	<header>
		<!-- Menu -->
		<nav id="menufixo" class="white" role="navigation">
			<div class="nav-wrapper container">
				<a id="logo-container" href="index.html" class="brand-logo">Autask</a>
				<ul class="right hide-on-med-and-down">
					<img class="imgLogo" src="img/logoOficial.png" alt="Logo" style="border: 0;position: absolute;width: 4%;right: 101%;bottom: 23%;">
					<li>
						<a href="index.html">Home</a>
					</li>
					<li>
						<a href="login.html">Login</a>
					</li>
					<li id="cadastro">
						<a class='dropdown-button' href='#' data-activates='dropdown1'>Cadastre-se</a>
						<ul id='dropdown1' class='dropdown-content'>
							<li>
								<a href="Cadastro_Pessoa_Fisica.html">Pessoa Fisica</a>
							</li>
							<li>
								<a href="Cadastro_Pessoa_Juridica.html">Pessoa Juridica</a>
							</li>
						</ul>
					</li>
				</ul>>
				<!-- Menu Mobile -->
				<ul id="nav-mobile" class="side-nav">
					<li>
						<a href="index.html">Home</a>
					</li>
					<li>
						<a href="login.html">Login</a>
					</li>
					<li>
						<a href="Cadastro_Pessoa_Fisica.html">Cadastro Pessoa Fisica</a>
					</li>
					<li>
						<a href="Cadastro_Pessoa_Juridica.html">Cadastro Pessoa Juridica</a>
					</li>
				</ul>
				<a href="#" data-activates="nav-mobile" class="button-collapse">
					<i class="material-icons">menu</i>
				</a>
			</div>
		</nav>

		<!-- Inicio do Section -->
		<div class="container">
			<div class="row" style="position: relative ;top:45px">
				<!-- Texto Titulo da página -->
				<h1 id="txtComeco" class="header center teal-text text-lighten-2">Cadastro Pessoa Jurídica</h1>
				<!-- Comeco do formulario -->
				<form class="col s12">

					<div class="row">
						<div class="input-field col s12">
							<input name="Nome" id="inputnome" type="text" class="validate">
							<label for="name">Razão Social</label>
							<p id="msgErronome" class="msgErro esconder">Preencher o campo razão social é obrigatório !</p>
						</div>
					</div>

					<div class="row">
						<div class="input-field col s6">
							<label for="inputcelular">Celular</label>
							<input type="text" class="form-control" name="Celular" id="inputcelular" pattern="\([0-9]{2}\)[\s][0-9]{4}-[0-9]{4,5}">
							<script type="text/javascript">$("#inputcelular").mask("(00) 0000-00000");</script>
							<p id="msgErrocelular" class="msgErro esconder">Preencher o campo celular é obrigatório !</p>
							<p id="msgErrocelular2" class="msgErro esconder">Digite o numero do celular corretamente!</p>
						</div>

						<div class="input-field col s6">
							<label for="inputelefone">Telefone</label>
							<input type="text" class="form-control" name="Telefone" id="inputelefone" pattern="\([0-9]{2}\)[\s][0-9]{4}-[0-9]{4,5}">
							<script type="text/javascript">$("#inputelefone").mask("(00) 0000-0000");</script>
							<p id="msgErrotelefone" class="msgErro esconder">Preencher o campo telefone é obrigatório !</p>
							<p id="msgErrotelefone2" class="msgErro esconder">Digite o numero do telefone corretamente!</p>
						</div>
					</div>

					<div class="row">
						<div class="input-field col s6">
							<label for="cnpj">CNPJ</label>
							<input type="text" class="form-control" id="inputcnpj" name="CNPJ" pattern="\([0-9]{2}\)[\s][0-9]{4}-[0-9]{4,5}">
							<script type="text/javascript">$("#inputcnpj").mask("99.999.999/9999-99");</script>
							<p id="msgErrocnpj" class="msgErro esconder">Preencher o campo cnpj é obrigatório !</p>
							<p id="msgErrocnpj2" class="msgErro esconder">Digite o numero do cnpj corretamente!</p>
						</div>

						<div class="input-field col s6">
							<input id="inputcontato" name="EmailContato" type="email" class="validate">
							<label for="email">Email para contato</label>
							<p id="msgErrocontato2" class="msgErro esconder">Digite o E-mail corretamente!</p>
							<small id="smallemailcontato" class="text-form text-muted">Este e-mail e para você poder saber todas as novidades da plataforma!</small>
						</div>

					</div>

					<div class="row">
						<div class="input-field col s4">
							<label for="cep">CEP</label>
							<input type="text" class="form-control" name="CEP" id="cep">
							<script type="text/javascript">$("#cep").mask("00000-000");</script>
							<p id="msgErrocep" class="msgErro esconder">Preencher o campo CEP é obrigatório !</p>
							<p id="msgErrocep2" class="msgErro esconder">Digite o CEP corretamente!</p>
						</div>
						<div class="form-group col-sm-4">
							<button type="button" class="btn btn-info mt-4" id="buscarcep">Buscar</button>
						</div>
						<div class="input-field col s12">
							<label for="rua">Rua</label>
							<input type="text" class="form-control" name="Logradouro" id="rua" placeholder="">
						</div>
						<div class="input-field col s6">
							<label for="bairro">Bairro</label>
							<input type="text" class="form-control" name="Bairro" id="bairro" placeholder="Bairro" disabled>
						</div>
						<div class="input-field col s6">
							<label for="cidade">Cidade</label>
							<input type="text" class="form-control" name="Cidade" id="cidade" placeholder="Cidade" disabled>
						</div>
						<div class="input-field col s4">
							<label for="numero">Numero</label>
							<input type="text" class="form-control" name="Numero" id="numero">
							<p id="msgErronumero" class="msgErro esconder">Preencher o campo numero é obrigatório!!</p>
							<p id="msgErronumero2" class="msgErro esconder">Digite o numero corretamente!</p>
						</div>
						<div class="input-field col s4">
							<label for="complemento">Complemento</label>
							<input type="text" class="form-control" name="Complemento" id="complemento">
						</div>
						<div class="input-field col s4">
							<label for="uf">UF</label>
							<input type="text" class="form-control" name="UF" id="uf" placeholder="UF" disabled>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="inputemail" name="Email" type="email" class="validate">
							<label for="email">Email</label>
							<p id="msgErroemail" class="msgErro esconder">Preencher o campo E-mail é obrigatório !</p>
							<p id="msgErroemail2" class="msgErro esconder">Digite o E-mail corretamente!</p>
						</div>

						<div class="input-field col s6">
							<input id="inputsenha" name="Senha" type="password" class="validate">
							<label for="senha">Senha</label>
							<p id="msgErrosenha" class="msgErro esconder">Preencher o campo senha é obrigatório !</p>
							<p id="msgErrosenha2" class="msgErro esconder">Senha precisa ter 4 ou mais caracteres!</p>
						</div>

						<div class="input-field col s6">
							<input id="inputconfirma" name="Confirmar" type="password" class="validate">
							<label for="confirmarsenha">Confirmar Senha</label>
							<p id="msgErroconfirma" class="msgErro esconder">Preencher o campo E-mail é obrigatório !</p>
							<p id="msgErroconfirma2" class="msgErro esconder">As senhas nao se equivalem, digite a senha novamente!</p>
						</div>
					</div>

					<div class="modal-footer">
						<button id="cadastrar" type="button" class="btn btn-primary">Cadastrar </button>
						<!-- Esta feito para fechar somente-->
					</div>

			</div>
			<!-- Fim section -->




			<!--  Scripts-->
			<script src="js/materialize.js"></script>
			<script src="js/init.js"></script>
			<script>
				// Java script//
				$(document).ready(function () {

					$('#buscarcep').click(function () {
						var cep = $('#cep').val();
						var url = 'https://viacep.com.br/ws/' + cep + '/json';
						$.getJSON(url, function (data) {
							if ("error" in data) {
								console.log("Deu bosta");
							}
							$('#rua').val(data.logradouro);
							$('#bairro').val(data.bairro);
							$('#cidade').val(data.localidade);
							$('#uf').val(data.uf);
							$('#complemento').val(data.complemento);
							console.log("Deu certo");
						})
					});

					$('#inputnome').blur(function () {
						if ($(this).val() == null || $(this).val().trim() == ""){
							$('#msgErronome').fadeIn(700);
						}else{
							$('#msgErronome').fadeOut(0);
						}
					});

					$('#inputcelular').blur(function () {
						var celular = $('#inputcelular').val();
						if ($(this).val() == null || $(this).val().trim() == "") {
							$('#msgErrocelular').fadeIn();
							$('#msgErrocelular2').fadeOut(0);
						} else {
							$('#msgErrocelular').fadeOut(0);
							if (celular.length < 14)
								$('#msgErrocelular2').fadeIn();
							else
								$('#msgErrocelular2').fadeOut(0);
						}
					});
					$('#inputelefone').blur(function () {
						var telefone = $('#inputelefone').val();
						if ($(this).val() == null || $(this).val().trim() == "") {
							$('#msgErrotelefone').fadeIn();
							$('#msgErrotelefone2').fadeOut(0);
						} else {
							$('#msgErrotelefone').fadeOut(0);
							if (telefone.length < 14)
								$('#msgErrotelefone2').fadeIn();
							else
								$('#msgErrotelefone2').fadeOut(0);
						}
					});

					$('#inputcnpj').blur(function () {
						var cnpj = $('#inputcnpj').val();
						if ($(this).val() == null || $(this).val().trim() == "") {
							$('#msgErrocnpj').fadeIn();
							$('#msgErrocnpj2').fadeOut(0);
						} else {
							$('#msgErrocnpj').fadeOut(0);
							if (cnpj.length < 18)
								$('#msgErrocnpj2').fadeIn();
							else
								$('#msgErrocnpj2').fadeOut(0);
						}
					});

					$('#inputcontato').blur(function () {
						if ($(this).val() == null || $(this).val().trim() == "")
							$('#msgErrocontato').fadeIn();
						else
							$('#msgErrocontato').fadeOut(0);
					});

					$('#numero').blur(function () {
						var numero = $('#numero').val();
						if ($(this).val() == null || $(this).val().trim() == "") {
							$('#msgErronumero').fadeIn();
							$('#msgErronumero2').fadeOut(0);
						} else {
							$('#msgErronumero').fadeOut(0);
							if (isNaN(numero))
								$('#msgErronumero2').fadeIn();
							else
								$('#msgErronumero2').fadeOut(0);
						}
					});

					$('#cep').blur(function () {
						var cep = $('#cep').val();
						if ($(this).val() == null || $(this).val().trim() == "") {
							$('#msgErrocep').fadeIn();
							$('#msgErrocep2').fadeOut(0);
						} else {
							$('#msgErrocep').fadeOut(0);
							if (cep.length < 9)
								$('#msgErrocep2').fadeIn();
							else
								$('#msgErrocep2').fadeOut(0);
						}
					});



					$('#inputemail').blur(function () {
						if ($(this).val() == null || $(this).val().trim() == "")
							$('#msgErroemail').fadeIn();
						else
							$('#msgErroemail').fadeOut(0);
					});

					$('#inputsenha').blur(function () {
						var senha = $('#inputsenha').val();
						if ($(this).val() == null || $(this).val().trim() == "") {
							$('#msgErrosenha').fadeIn();
							$('#msgErrosenha2').fadeOut(0);
						} else {
							$('#msgErrosenha').fadeOut(0);
							if (senha.length < 4) {
								$('#msgErrosenha2').fadeIn();
								$('#msgErrosenha').fadeOut(0);
							} else
								$('#msgErrosenha2').fadeOut(0);
						}
					});

					$('#inputconfirma').blur(function () {
						var senha = $('#inputsenha').val();
						var senha2 = $('#inputconfirma').val();
						if (senha != senha2)
							$('#msgErroconfirma2').fadeIn();
						else
							$('#msgErroconfirma2').fadeOut(0);
					});

					$('#cadastrar').click(function () {
						var nome = $('#inputnome').val();
						var celular = $('#inputcelular').val();
						var cnpj = $('#inputcnpj').val();
						var contato = $('#inputcontato').val();
						var telefone = $('#inputelefone').val();
						var rua = $('#rua').val();
						var cep = $('#cep').val();
						var bairro = $('#bairro').val();
						var uf = $('#uf').val();
						var cidade = $('#cidade').val();
						var numero = $('#numero').val();
						var complemento = $('#complemento').val();
						var email = $('#inputemail').val();
						var senha = $('#inputsenha').val();
						var confirma = $('#inputconfirma').val();
					

						if (nome == null || nome == "")
							$('#msgErronome').fadeIn();
						else
							$('#msgErronome').fadeOut(0);

						if (celular == null || celular == "") {
							$('#msgErrocelular').fadeIn();
							$('#msgErrocelular2').fadeOut(0);
						} else {
							$('#msgErrocelular').fadeOut(0);
							if (celular.length < 14)
								$('#msgErrocelular2').fadeIn();
							else
								$('#msgErrocelular2').fadeOut(0);
						}

						if (telefone == null || telefone == "") {
							$('#msgErrotelefone').fadeIn();
							$('#msgErrotelefone2').fadeOut(0);
						} else {
							$('#msgErrotelefone').fadeOut(0);
							if (telefone.length < 14)
								$('#msgErrotelefone2').fadeIn();
							else
								$('#msgErrotelefone2').fadeOut(0);
						}

						if (cnpj == null || cnpj == "") {
							$('#msgErrocnpj').fadeIn();
							$('#msgErrocnpj2').fadeOut(0);
						} else {
							$('#msgErrocnpj').fadeOut(0);
							if (cnpj.length < 18)
								$('#msgErrocnpj2').fadeIn();
							else
								$('#msgErrocnpj2').fadeOut(0);
						}

						if (numero == null || numero == "")
							$('#msgErronumero').fadeIn();
						else {
							$('#msgErronumero').fadeOut(0);
							if (isNaN(numero))
								$('#msgErronumero2').fadeIn();
							else
								$('#msgErronumero2').fadeOut(0);
						}

						if (cep == null || cep == "") {
							$('#msgErrocep').fadeIn();
							$('#msgErrocep2').fadeOut(0);
						} else {
							$('#msgErrocep').fadeOut(0);
							if (cep.length < 9)
								$('#msgErrocep2').fadeIn();
							else
								$('#msgErrocep2').fadeOut(0);
						}

						if (senha == null || senha == "") {
							$('#msgErrosenha').fadeIn();
							$('#msgErrosenha2').fadeOut(0);
						} else {
							$('#msgErrosenha').fadeOut(0);
							if (senha.length < 4) {
								$('#msgErrosenha2').fadeIn();
								$('#msgErrosenha').fadeOut(0);
							} else
								$('#msgErrosenha2').fadeOut(0);
						}

						if (confirma != senha)
							$('#msgErroconfirma2').fadeIn();
						else
							$('#msgErroconfirma2').fadeOut(0);
						
							if (Validarformulario()==true) {
								var Juridica = {
									Nome: string = nome,
									TipoPessoa: "J",
									CNPJ: string = cnpj,
									Telefone: string = telefone,
									Celular: string = celular,
									EmailContato: string = contato,
									CEP: string = cep,
									Logradouro: string = rua,
									Bairro: string = bairro,
									UF: string = uf,
									Cidade: string = cidade,
									Numero: string = numero,
									Complemento: string = complemento,
									Email: string = email,
									Senha: string = senha,
									Confirmar: string = confirma
								}

								$.ajax({
									type: "POST",
									url: "http://saulodacruz2-001-site1.itempurl.com/api/Usuario/Cadastrar",
									data: Juridica,
									success: function (retorno) {
										if (retorno == "Cadastro realizado com sucesso !") {
											$.confirm({
												title: 'Sucesso!',
												content: retorno,
												type: 'green',
												typeAnimated: true,
												buttons: {
													Ok: {
														text: 'Ok',
														btnClass: 'btn-green',
														action: function () {
															window.location.href = "index.html";
														}
													}
												}
											});
										}
										else {
											$.confirm({
												title: 'Erro!',
												content: retorno,
												type: 'red',
												typeAnimated: true,
												buttons: {
													Ok: {
														text: 'Ok',
														btnClass: 'btn-red',
														action: function () {
														}
													}
												}
											});
										}
									},
									error: function (erro) {
										if (retorno != "Cadastro realizado com sucesso !") {
											$.confirm({
												title: 'Erro!',
												content: "Aconteceu um erro na requisição: " + erro.responseText,
												type: 'red',
												typeAnimated: true,
												buttons: {
													Ok: {
														text: 'Ok',
														btnClass: 'btn-red',
														action: function () {
														}
													}
												}
											});
										}
										else {
											$.confirm({
												title: 'Erro!',
												content: "Por favor, reveja os campos novamente.",
												type: 'red',
												typeAnimated: true,
												buttons: {
													Ok: {
														text: 'Ok',
														btnClass: 'btn-red',
														action: function () {
														}
													}
												}
											});
										}

									}
							});

						}
					function Validarformulario() {
						if ($("#inputnome").val() == null || $("#inputnome").val().trim() == "" ||
							$("#inputcelular").val() == null || $("#inputcelular").val().trim() == "" ||
							$("#inputcnpj").val() == null || $("#inputcnpj").val().trim() == "" ||
							$("#inputelefone").val() == null || $("#inputelefone").val().trim() == "" ||
							$("#rua").val() == null || $("#rua").val().trim() == "" ||
							$("#cep").val() == null || $("#cep").val().trim() == "" ||
							$("#bairro").val() == null || $("#bairro").val().trim() == "" ||
							$("#uf").val() == null || $("#uf").val().trim() == "" ||
							$("#cidade").val() == null || $("#cidade").val().trim() == "" ||
							$("#numero").val() == null || $("#numero").val().trim() == "" ||
							$("#inputemail").val() == null || $("#inputemail").val().trim() == "" ||
							$("#inputsenha").val() == null || $("#inputsenha").val().trim() == "" ||
							$("#inputconfirma").val() == null || $("#inputconfirma").val().trim() == "")
							return false
						else
							return true
					}
				});
			});
			</script>

</body>

</html>